<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">


<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RefeiçãoIF</title>
    <!-- CSS  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
          rel="stylesheet" />


    <h:outputStylesheet library="css" name="materialize.css" />

    <h:outputStylesheet library="css" name="estile.css" />



</h:head>
<h:body>


    <h:outputStylesheet library="css" name="login.css" />

    <br/><br/>
    <div class="row " >
        <div class="col s4"></div>
      <div class="col s4" >
            <div class="card white " align="center">

                <h:form id="login">

                    <img src="/app/resources/img/Logo.png" class="logoimagem" />

                    <h:messages
                            layout="table"
                            showSummary="true"
                            showDetail="true"
                            globalOnly="true"

                            errorClass="card-panel center-align red white-text "

                            fatalClass="card-panel center-align grey darken-4 white-text "

                            infoClass="card-panel center-align green accent-3 black-text "

                            warnClass="card-panel center-align yellow accent-3 black-text "
                    />
                    <div class="input-field">
                        <h:outputLabel for="cpf">Usuário:</h:outputLabel>
                        <h:inputText id="cpf"
                                     value="#{usuarioController.matricula}" />
                    </div>
                    <div class="input-field">
                        <h:outputLabel for="senha">Senha:</h:outputLabel>
                        <h:inputSecret id="senha"
                                       value="#{usuarioController.senha}" />
                    </div>

                    <h:commandButton
                            value="Acessar"
                            action="#{usuarioController.logon()}"
                            styleClass="white-text btn green accent-4 center-align btn-large"/>
                            
                     <h:inputHidden id="latitude" value="#{usuarioController.latitude}"/>
                     <h:inputHidden id="longitude" value="#{usuarioController.longitude}"/>
                </h:form>
                <br/><br/>
                <br/><br/>
            </div></div>


        <div class="col s4"></div>
    </div>

    <div class="footer-copyright">
        <div class="container white-text">
            © 2019 Copyright
        </div>
    </div>
    <br/><br/>
    <br/><br/>
    <!--  Scripts-->
    <h:outputScript library="js" name="JQuery.js" />
    <h:outputScript library="js" name="materialize.js" />
    <h:outputScript library="js" name="init.js" />


	<script>
		var lat = document.getElementById("login:latitude");
		var log = document.getElementById("login:longitude");
		function getLocation() {
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(showPosition,showError);
			} else {
				alert("Seu browser não suporta Geolocalização.");
			}
		}
		function showPosition(position) {
			lat.value = position.coords.latitude;
			log.value = position.coords.longitude;
		}
		function showError(error) {
			switch (error.code) {
			case error.PERMISSION_DENIED:
				alert("Usuário rejeitou a solicitação de Geolocalização.")
				break;
			case error.POSITION_UNAVAILABLE:
				alert("Localização indisponível.")
				break;
			case error.TIMEOUT:
				alert("A requisição expirou.")
				break;
			case error.UNKNOWN_ERROR:
				alert("Algum erro desconhecido aconteceu.")
				break;
			}
		}
		getLocation();
	</script>


</h:body>

</html>
